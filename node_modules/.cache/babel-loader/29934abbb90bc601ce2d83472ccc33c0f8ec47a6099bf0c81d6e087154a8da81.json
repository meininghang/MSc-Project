{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst secp256k1_1 = __importDefault(require(\"../keys/secp256k1\"));\nconst secp256k1_2 = __importDefault(require(\"secp256k1\"));\nconst ethers_1 = require(\"ethers\");\nclass EthereumSigner extends secp256k1_1.default {\n  get publicKey() {\n    return Buffer.from(this.pk, \"hex\");\n  }\n  constructor(key) {\n    const b = Buffer.from(key, \"hex\");\n    const pub = secp256k1_2.default.publicKeyCreate(b, false);\n    super(key, Buffer.from(pub));\n  }\n  sign(message) {\n    const wallet = new ethers_1.ethers.Wallet(this._key);\n    return wallet.signMessage(message).then(r => Buffer.from(r.slice(2), \"hex\"));\n  }\n  static async verify(pk, message, signature) {\n    const address = ethers_1.ethers.utils.computeAddress(pk);\n    return ethers_1.ethers.utils.verifyMessage(message, signature) === address;\n  }\n}\nexports.default = EthereumSigner;","map":{"version":3,"names":["secp256k1_1","__importDefault","require","secp256k1_2","ethers_1","EthereumSigner","default","publicKey","Buffer","from","pk","constructor","key","b","pub","publicKeyCreate","sign","message","wallet","ethers","Wallet","_key","signMessage","then","r","slice","verify","signature","address","utils","computeAddress","verifyMessage","exports"],"sources":["ethereumSigner.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;AAAA,MAAAA,WAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,WAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,QAAA,GAAAF,OAAA;AAEA,MAAqBG,cAAe,SAAQL,WAAA,CAAAM,OAAS;EACnD,IAAIC,SAASA,CAAA;IACX,OAAOC,MAAM,CAACC,IAAI,CAAC,IAAI,CAACC,EAAE,EAAE,KAAK,CAAC;EACpC;EAEAC,YAAYC,GAAW;IACrB,MAAMC,CAAC,GAAGL,MAAM,CAACC,IAAI,CAACG,GAAG,EAAE,KAAK,CAAC;IACjC,MAAME,GAAG,GAAGX,WAAA,CAAAG,OAAS,CAACS,eAAe,CAACF,CAAC,EAAE,KAAK,CAAC;IAC/C,KAAK,CAACD,GAAG,EAAEJ,MAAM,CAACC,IAAI,CAACK,GAAG,CAAC,CAAC;EAC9B;EAEAE,IAAIA,CAACC,OAAmB;IACtB,MAAMC,MAAM,GAAG,IAAId,QAAA,CAAAe,MAAM,CAACC,MAAM,CAAC,IAAI,CAACC,IAAI,CAAC;IAC3C,OAAOH,MAAM,CACVI,WAAW,CAACL,OAAO,CAAC,CACpBM,IAAI,CAAEC,CAAC,IAAKhB,MAAM,CAACC,IAAI,CAACe,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAQ;EACvD;EAEA,aAAaC,MAAMA,CACjBhB,EAAmB,EACnBO,OAAmB,EACnBU,SAAqB;IAErB,MAAMC,OAAO,GAAGxB,QAAA,CAAAe,MAAM,CAACU,KAAK,CAACC,cAAc,CAACpB,EAAE,CAAC;IAC/C,OAAON,QAAA,CAAAe,MAAM,CAACU,KAAK,CAACE,aAAa,CAACd,OAAO,EAAEU,SAAS,CAAC,KAAKC,OAAO;EACnE;;AAzBFI,OAAA,CAAA1B,OAAA,GAAAD,cAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}