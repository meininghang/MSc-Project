{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MIN_BINARY_SIZE = void 0;\nconst utils_1 = require(\"./utils\");\nconst parser_1 = require(\"./parser\");\nconst base64url_1 = __importDefault(require(\"base64url\"));\nconst buffer_1 = require(\"buffer\");\nconst ar_data_bundle_1 = require(\"./ar-data-bundle\");\nconst index_1 = require(\"./signing/index\");\nconst ar_data_base_1 = require(\"./ar-data-base\");\nconst axios_1 = __importDefault(require(\"axios\"));\nconst constants_1 = require(\"./constants\");\nconst crypto = __importStar(require(\"crypto-browserify\"));\nexports.MIN_BINARY_SIZE = 80;\nclass DataItem {\n  constructor(binary) {\n    this.binary = binary;\n  }\n  static isDataItem(obj) {\n    return obj.binary !== undefined;\n  }\n  get signatureType() {\n    const signatureTypeVal = utils_1.byteArrayToLong(this.binary.subarray(0, 2));\n    switch (signatureTypeVal) {\n      case 1:\n        {\n          return constants_1.SignatureConfig.ARWEAVE;\n        }\n      case 2:\n        {\n          return constants_1.SignatureConfig.ED25519;\n        }\n      case 3:\n        {\n          return constants_1.SignatureConfig.ETHEREUM;\n        }\n      case 4:\n        {\n          return constants_1.SignatureConfig.SOLANA;\n        }\n      default:\n        {\n          throw new Error(\"Unknown signature type: \" + signatureTypeVal);\n        }\n    }\n  }\n  async isValid() {\n    return DataItem.verify(this.binary);\n  }\n  get id() {\n    return base64url_1.default.encode(this.rawId);\n  }\n  set id(id) {\n    this._id = base64url_1.default.toBuffer(id);\n  }\n  get rawId() {\n    return crypto.createHash(\"sha256\").update(this.rawSignature).digest();\n  }\n  set rawId(id) {\n    this._id = id;\n  }\n  get rawSignature() {\n    return this.binary.subarray(2, 2 + this.signatureLength);\n  }\n  get signature() {\n    return base64url_1.default.encode(this.rawSignature);\n  }\n  get signatureLength() {\n    return constants_1.SIG_CONFIG[this.signatureType].sigLength;\n  }\n  get rawOwner() {\n    return this.binary.subarray(2 + this.signatureLength, 2 + this.signatureLength + this.ownerLength);\n  }\n  get owner() {\n    return base64url_1.default.encode(this.rawOwner);\n  }\n  get ownerLength() {\n    return constants_1.SIG_CONFIG[this.signatureType].pubLength;\n  }\n  get rawTarget() {\n    const targetStart = this.getTargetStart();\n    const isPresent = this.binary[targetStart] == 1;\n    return isPresent ? this.binary.subarray(targetStart + 1, targetStart + 33) : buffer_1.Buffer.alloc(0);\n  }\n  get target() {\n    return base64url_1.default.encode(this.rawTarget);\n  }\n  get rawAnchor() {\n    const anchorStart = this.getAnchorStart();\n    const isPresent = this.binary[anchorStart] == 1;\n    return isPresent ? this.binary.subarray(anchorStart + 1, anchorStart + 33) : buffer_1.Buffer.alloc(0);\n  }\n  get anchor() {\n    return this.rawAnchor.toString();\n  }\n  get rawTags() {\n    const tagsStart = this.getTagsStart();\n    const tagsSize = utils_1.byteArrayToLong(this.binary.subarray(tagsStart + 8, tagsStart + 16));\n    return this.binary.subarray(tagsStart + 16, tagsStart + 16 + tagsSize);\n  }\n  get tags() {\n    const tagsStart = this.getTagsStart();\n    const tagsCount = utils_1.byteArrayToLong(this.binary.subarray(tagsStart, tagsStart + 8));\n    if (tagsCount == 0) {\n      return [];\n    }\n    const tagsSize = utils_1.byteArrayToLong(this.binary.subarray(tagsStart + 8, tagsStart + 16));\n    return parser_1.tagsParser.fromBuffer(buffer_1.Buffer.from(this.binary.subarray(tagsStart + 16, tagsStart + 16 + tagsSize)));\n  }\n  get tagsB64Url() {\n    const _tags = this.tags;\n    return _tags.map(t => ({\n      name: base64url_1.default.encode(t.name),\n      value: base64url_1.default.encode(t.value)\n    }));\n  }\n  getStartOfData() {\n    const tagsStart = this.getTagsStart();\n    const numberOfTagBytesArray = this.binary.subarray(tagsStart + 8, tagsStart + 16);\n    const numberOfTagBytes = utils_1.byteArrayToLong(numberOfTagBytesArray);\n    return tagsStart + 16 + numberOfTagBytes;\n  }\n  get rawData() {\n    const tagsStart = this.getTagsStart();\n    const numberOfTagBytesArray = this.binary.subarray(tagsStart + 8, tagsStart + 16);\n    const numberOfTagBytes = utils_1.byteArrayToLong(numberOfTagBytesArray);\n    const dataStart = tagsStart + 16 + numberOfTagBytes;\n    return this.binary.subarray(dataStart, this.binary.length);\n  }\n  get data() {\n    return base64url_1.default.encode(this.rawData);\n  }\n  /**\n   * UNSAFE!!\n   * DO NOT MUTATE THE BINARY ARRAY. THIS WILL CAUSE UNDEFINED BEHAVIOUR.\n   */\n  getRaw() {\n    return this.binary;\n  }\n  async sign(signer) {\n    this._id = await ar_data_bundle_1.sign(this, signer);\n    return this.rawId;\n  }\n  isSigned() {\n    var _a, _b;\n    return ((_b = (_a = this._id) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) > 0;\n  }\n  /**\n   * Returns a JSON representation of a DataItem\n   */\n  toJSON() {\n    return {\n      signature: this.signature,\n      owner: this.owner,\n      target: this.target,\n      tags: this.tags.map(t => ({\n        name: base64url_1.default.encode(t.name),\n        value: base64url_1.default.encode(t.value)\n      })),\n      data: this.data\n    };\n  }\n  /**\n   * @deprecated Since version 0.3.0. Will be deleted in version 0.4.0. Use @bundlr-network/client package instead to interact with Bundlr\n   */\n  async sendToBundler(bundler) {\n    const headers = {\n      \"Content-Type\": \"application/octet-stream\"\n    };\n    if (!this.isSigned()) throw new Error(\"You must sign before sending to bundler\");\n    const response = await axios_1.default.post(`${bundler}/tx`, this.getRaw(), {\n      headers,\n      timeout: 100000,\n      maxBodyLength: Infinity,\n      validateStatus: status => status > 200 && status < 300 || status !== 402\n    });\n    if (response.status === 402) throw new Error(\"Not enough funds to send data\");\n    return response;\n  }\n  /**\n   * Verifies a `Buffer` and checks it fits the format of a DataItem\n   *\n   * A binary is valid iff:\n   * - the tags are encoded correctly\n   */\n  static async verify(buffer) {\n    if (buffer.byteLength < exports.MIN_BINARY_SIZE) {\n      return false;\n    }\n    const item = new DataItem(buffer);\n    const sigType = item.signatureType;\n    const tagsStart = item.getTagsStart();\n    const numberOfTags = utils_1.byteArrayToLong(buffer.subarray(tagsStart, tagsStart + 8));\n    const numberOfTagBytesArray = buffer.subarray(tagsStart + 8, tagsStart + 16);\n    const numberOfTagBytes = utils_1.byteArrayToLong(numberOfTagBytesArray);\n    if (numberOfTagBytes > 4096) return false;\n    if (numberOfTags > 0) {\n      try {\n        const tags = parser_1.tagsParser.fromBuffer(buffer_1.Buffer.from(buffer.subarray(tagsStart + 16, tagsStart + 16 + numberOfTagBytes)));\n        if (tags.length !== numberOfTags) {\n          return false;\n        }\n      } catch (e) {\n        return false;\n      }\n    }\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    const Signer = index_1.indexToType[sigType];\n    const signatureData = await ar_data_base_1.getSignatureData(item);\n    return await Signer.verify(item.rawOwner, signatureData, item.rawSignature);\n  }\n  async getSignatureData() {\n    return ar_data_base_1.getSignatureData(this);\n  }\n  /**\n   * Returns the start byte of the tags section (number of tags)\n   *\n   * @private\n   */\n  getTagsStart() {\n    const targetStart = this.getTargetStart();\n    const targetPresent = this.binary[targetStart] == 1;\n    let tagsStart = targetStart + (targetPresent ? 33 : 1);\n    const anchorPresent = this.binary[tagsStart] == 1;\n    tagsStart += anchorPresent ? 33 : 1;\n    return tagsStart;\n  }\n  /**\n   * Returns the start byte of the tags section (number of tags)\n   *\n   * @private\n   */\n  getTargetStart() {\n    return 2 + this.signatureLength + this.ownerLength;\n  }\n  /**\n   * Returns the start byte of the tags section (number of tags)\n   *\n   * @private\n   */\n  getAnchorStart() {\n    let anchorStart = this.getTargetStart() + 1;\n    const targetPresent = this.binary[this.getTargetStart()] == 1;\n    anchorStart += targetPresent ? 32 : 0;\n    return anchorStart;\n  }\n}\nexports.default = DataItem;","map":{"version":3,"names":["utils_1","require","parser_1","base64url_1","__importDefault","buffer_1","ar_data_bundle_1","index_1","ar_data_base_1","axios_1","constants_1","crypto","__importStar","exports","MIN_BINARY_SIZE","DataItem","constructor","binary","isDataItem","obj","undefined","signatureType","signatureTypeVal","byteArrayToLong","subarray","SignatureConfig","ARWEAVE","ED25519","ETHEREUM","SOLANA","Error","isValid","verify","id","default","encode","rawId","_id","toBuffer","createHash","update","rawSignature","digest","signatureLength","signature","SIG_CONFIG","sigLength","rawOwner","ownerLength","owner","pubLength","rawTarget","targetStart","getTargetStart","isPresent","Buffer","alloc","target","rawAnchor","anchorStart","getAnchorStart","anchor","toString","rawTags","tagsStart","getTagsStart","tagsSize","tags","tagsCount","tagsParser","fromBuffer","from","tagsB64Url","_tags","map","t","name","value","getStartOfData","numberOfTagBytesArray","numberOfTagBytes","rawData","dataStart","length","data","getRaw","sign","signer","isSigned","_b","_a","toJSON","sendToBundler","bundler","headers","response","post","timeout","maxBodyLength","Infinity","validateStatus","status","buffer","byteLength","item","sigType","numberOfTags","e","Signer","indexToType","signatureData","getSignatureData","targetPresent","anchorPresent"],"sources":["DataItem.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}