{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n// import {genAPI} from \"arseeding-js\";\n// import pubsub from \"pubsub-js\";\nimport { mapActions, mapGetters } from 'vuex';\n// import {providers} from \"ethers\";\n// import getCurrency from 'bundlr-arseeding-client/build/web/currencies'\n\nexport default {\n  name: \"loginWallet\",\n  data() {\n    return {\n      walletDialogVisible: false,\n      signerAddr: \"\"\n    };\n  },\n  computed: {\n    ...mapGetters({\n      account: 'account/account'\n      // provider: 'account/PROVIDER_INFO',\n    })\n  },\n\n  methods: {\n    ...mapActions({\n      getAccount: 'account/getNewMetaMaskAccount'\n    }),\n    openDialog() {\n      this.walletDialogVisible = true;\n    },\n    async connectWallet() {\n      // await window.ethereum.enable()\n      // const instance = await genAPI(window.ethereum)\n      // // 下面这个存在store里面\n      // this.signerAddr = window.ethereum.selectedAddress\n      // pubsub.publish('connected',instance)\n      // 老版本的获取账号，因为会调用公钥，在登陆的时候没有什么用，所以登录的时候只获取到账号信息就行了\n      const account = await this.getAccount();\n      // sessionStorage.setItem('ACCOUNT_STRING', account)\n      if (account && account.length !== 0) {\n        this.$router.push({\n          name: 'HomePage'\n        });\n      } else {\n        this.$message.error('Account verification failed');\n      }\n    }\n    // async openWindow() {\n    //   // await window.ethereum.enable()\n    //   // const provider = new providers.Web3Provider(window.ethereum)\n    //   // await provider._ready()\n    //   // const info = await this.getAccount()\n    //   // const currencyConfig = getCurrency('ethereum', info.provider)\n    //   // await currencyConfig.ready()\n    //   // const signer = await currencyConfig.getSigner()\n    //   // console.log(222222222, signer)\n    // }\n  }\n};","map":{"version":3,"names":["mapActions","mapGetters","name","data","walletDialogVisible","signerAddr","computed","account","methods","getAccount","openDialog","connectWallet","length","$router","push","$message","error"],"sources":["src/components/__dialog/loginWallet.vue"],"sourcesContent":["<template>\r\n  <div class=\"wallet-list-dialog__main\">\r\n    <el-dialog\r\n        title=\"Connect Wallet\"\r\n        :visible.sync=\"walletDialogVisible\"\r\n        width=\"30%\"\r\n        center>\r\n      <div class=\"wallet-list-content\">\r\n        <div class=\"wallet-name-box\" @click=\"connectWallet\">\r\n          <img class=\"logo-style\" src=\"../../assets/img/MetaMask_Fox.svg.png\" alt=\"MetaMask\">\r\n          MetaMask\r\n        </div>\r\n      </div>\r\n      <p class=\"needing-attention\">By connecting your wallet you agree to <br/> the Terms of Service and Privacy Policy</p>\r\n      <!--      <div slot=\"footer\" class=\"dialog-footer\">-->\r\n      <!--        <el-button @click=\"walletDialogVisible = false\">CANCEL</el-button>-->\r\n      <!--        <el-button type=\"primary\" @click=\"walletDialogVisible = false\">CONNECT</el-button>-->\r\n      <!--      </div>-->\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import {genAPI} from \"arseeding-js\";\r\n// import pubsub from \"pubsub-js\";\r\nimport {mapActions, mapGetters} from 'vuex'\r\n// import {providers} from \"ethers\";\r\n// import getCurrency from 'bundlr-arseeding-client/build/web/currencies'\r\n\r\nexport default {\r\n  name: \"loginWallet\",\r\n  data() {\r\n    return {\r\n      walletDialogVisible: false,\r\n      signerAddr:\"\"\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      account: 'account/account',\r\n      // provider: 'account/PROVIDER_INFO',\r\n    }),\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      getAccount: 'account/getNewMetaMaskAccount'\r\n    }),\r\n    openDialog() {\r\n      this.walletDialogVisible = true\r\n    },\r\n    async connectWallet() {\r\n      // await window.ethereum.enable()\r\n      // const instance = await genAPI(window.ethereum)\r\n      // // 下面这个存在store里面\r\n      // this.signerAddr = window.ethereum.selectedAddress\r\n      // pubsub.publish('connected',instance)\r\n      // 老版本的获取账号，因为会调用公钥，在登陆的时候没有什么用，所以登录的时候只获取到账号信息就行了\r\n      const account = await this.getAccount()\r\n      // sessionStorage.setItem('ACCOUNT_STRING', account)\r\n      if (account && account.length !== 0) {\r\n        this.$router.push({\r\n          name: 'HomePage'\r\n        })\r\n      } else {\r\n        this.$message.error('Account verification failed')\r\n      }\r\n    },\r\n    // async openWindow() {\r\n    //   // await window.ethereum.enable()\r\n    //   // const provider = new providers.Web3Provider(window.ethereum)\r\n    //   // await provider._ready()\r\n    //   // const info = await this.getAccount()\r\n    //   // const currencyConfig = getCurrency('ethereum', info.provider)\r\n    //   // await currencyConfig.ready()\r\n    //   // const signer = await currencyConfig.getSigner()\r\n    //   // console.log(222222222, signer)\r\n    // }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.wallet-list-dialog__main {\r\n}\r\n.wallet-list-content {\r\n  width: 100%;\r\n  /*height: 170px;*/\r\n  /*padding: 0 30px;*/\r\n}\r\n.wallet-name-box {\r\n  /*width: 320px;*/\r\n  width: 90%;\r\n  height: 48px;\r\n  border-radius: 5px;\r\n  background-color: #ececec;\r\n  margin: 0 auto;\r\n  text-align: center;\r\n  color: #222326;\r\n  font-size: 15px;\r\n  line-height: 48px;\r\n  box-shadow: 8px 8px 0px 0px rgba(100, 71, 242, .3);\r\n  cursor: pointer;\r\n  position: relative;\r\n}\r\n.wallet-name-box:hover {\r\n  box-shadow: 8px 8px 0px 0px rgba(100, 71, 242, 1);\r\n}\r\n.wallet-name-box:nth-child(2) {\r\n  margin: 20px auto;\r\n}\r\n.needing-attention {\r\n  width: 260px;\r\n  margin: 60px auto 30px;\r\n  text-align: center;\r\n  color: #acacac;\r\n}\r\n.wallet-name-box .logo-style {\r\n  width: 30px;\r\n  height: 30px;\r\n  position: absolute;\r\n  top: 8px;\r\n  left: 20px;\r\n}\r\n.wallet-content {\r\n  cursor: not-allowed;\r\n}\r\n</style>"],"mappings":";AAuBA;AACA;AACA,SAAAA,UAAA,EAAAC,UAAA;AACA;AACA;;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,mBAAA;MACAC,UAAA;IACA;EACA;EACAC,QAAA;IACA,GAAAL,UAAA;MACAM,OAAA;MACA;IACA;EACA;;EACAC,OAAA;IACA,GAAAR,UAAA;MACAS,UAAA;IACA;IACAC,WAAA;MACA,KAAAN,mBAAA;IACA;IACA,MAAAO,cAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,MAAAJ,OAAA,cAAAE,UAAA;MACA;MACA,IAAAF,OAAA,IAAAA,OAAA,CAAAK,MAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;UACAZ,IAAA;QACA;MACA;QACA,KAAAa,QAAA,CAAAC,KAAA;MACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}